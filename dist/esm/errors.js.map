{"version":3,"file":"errors.js","names":["getEnvErrors","data","env","extra","arguments","length","undefined","listErrors","Object","keys","forEach","field","listFields","code","addExtra","getError","status","message","concat","getErrors","errors","buildErrors","text","key","replace"],"sources":["../../src/errors.ts"],"sourcesContent":["export interface NestedSchemas {\n  [key: string]: {\n    [key: string]: {\n      [key: string]: string;\n    }\n  }\n};\n\nexport interface arrayObject {\n  [key: string]: string;\n};\n\nfunction getEnvErrors(data: NestedSchemas, env: string, extra: arrayObject = {}) {\n  const listErrors = data[env] || [];\n  Object.keys(listErrors).forEach((field) => {\n    const listFields = listErrors[field] || [];\n    Object.keys(listFields).forEach((code) => {\n      listFields[code] = addExtra(listFields[code], extra);\n    });\n  });\n  return listErrors;\n}\n\nfunction getError(data: NestedSchemas, status: string, code: string) {\n  const listErrors = data['http'][status] || [];\n  return {\n    code,\n    message: listErrors[code] || listErrors[\"default\"] || `Erreur wording: ${code}`,\n  };\n};\n\nfunction getErrors(data: NestedSchemas, env: string, errors: arrayObject, extra: arrayObject = {}) {\n  const listErrors = data[env] || [];\n  const buildErrors: any = {};\n  Object.keys(errors).forEach((field) => {\n    const listFields = listErrors[field] || [];\n    const code = errors[field];\n    buildErrors[field] = {\n      code,\n      message: listFields[code] || listFields[\"default\"] || `Erreur wording: ${code}`,\n    };\n    buildErrors[field].message = addExtra(buildErrors[field].message, extra);\n  });\n  return buildErrors;\n};\n\nfunction addExtra(message: string, extra: arrayObject = {}) {\n  let text = message;\n  Object.keys(extra).forEach((key) => {\n    text = text.replace(`{{${key}}}`, extra[key]);\n  });\n  return text;\n};\n\nexport const errors = (data: NestedSchemas) => ({\n  getEnvErrors: (env: string, extra: arrayObject) => getEnvErrors(data, env, extra),\n  getError: (status: string, code: string) => getError(data, status, code),\n  getErrors: (env: string, errors: arrayObject, extra: arrayObject) => getErrors(data, env, errors, extra),\n});\n"],"mappings":"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","ignoreList":[]}